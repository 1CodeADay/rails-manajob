<div class="flex w-full h-screen ">
  <%= render "shared/sidebar", class: "h-full"%>
  <div  data-controller="datatable" class="flex-grow h-full overflow-auto" id="order-index">
    <table id="orders" class="display">
      <thead class="bg-gold">
        <tr>
          <th>Order</th>
          <th>Date</th>
          <th>Client</th>
          <th>Items</th>
          <th>Order Status</th>
          <th>Price</th>
          <th>Deposit</th>
          <th>Balance</th>
          <th>Deadline</th>
        </tr>
      </thead>
      <tbody>
        <% @orders.each do |order| %>
          <tr>
            <td><%= order.id%></td>
            <td><%= order.created_at.strftime("%Y-%m-%d") %></td>
            <td><%= order.client.first_name %> <%= order.client.last_name %></td>
            <td><%= order.items.count %> </td>
            <td><%= order.status %> </td>
            <td><%= order.items.sum(:price) %> </td>
            <td><%= order.items.sum(:deposit)%> </td>
            <td><%= order.items.sum(:price) - order.items.sum(:deposit)%> </td>
            <td><%= order.item_carts.first.deadline%> </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
